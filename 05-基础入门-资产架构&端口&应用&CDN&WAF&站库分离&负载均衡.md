## 第5天：基础入门-资产架构&端口&应用&CDN&WAF&站库分离&负载均衡

![img](https://cdn.nlark.com/yuque/0/2024/png/1591503/1720345433527-6eced59d-2ab9-4297-87e5-96c3d0160922.png)

```plain
#知识点：

1. 资产架构-端口&目录&插件接口&多站点&多应用
2. 番外安全-域名&服务器本身&服务厂商&管理人员
3. 考虑阻碍-站库分离&CDN&WAF&负载均衡&主机防护

#详细点：
1、前置条件-购买使用-云服务器&域名等
2、架构搭建-目录&端口&子域&插件&应用等
3、安全部署-WAF防火墙&主机防护&HIDS等
4、性能优化-负载均衡&CDN加速&OSS云存储等
```

## 一、资产架构

### 1、WEB单个源码安全

单个源码的目录指向单个站点域名

```plain
一个源码只需要绑定相对应的网站域名
```

![img](https://cdn.nlark.com/yuque/0/2024/png/1591503/1720345433057-f93d550b-7745-4a49-8569-7ebecfd84b9c.png)

### 2、WEB多个目录源码安全

例如：

```plain
bbs.xiaodi8.com         dz论坛
bbs.xiaodi8.com/blog    wp程序
```

\#一个网站，两套程序，任何一个程序出现问题都可以进行测试，选择不同的目录。

### 3、WEB多个端口源码安全

```plain
bbs.xiaodi8.com          dz论坛
bbs.xioadi8.com:8081     wp程序
一个网站，两个程序，任何一个程序出现问题都可以进行测试
```

### 4、服务器架设多个站点安全

```plain
bbs.xiaodi8.com  47.242.117.23 dz论坛
edu.xiaodi8.com  47.242.117.23 edu程序

子域名，同ip
给到你目标bbs.xiaodi8.com，可以尝试对edu.xiaodi8.com进行测试
```

### 5、架设第三方插件接口安全

```plain
wordpress插件
wp-file-manage也是有对网站造成危害

插件：web源码插件(wp-file-manage)、

web应用插件（phpmyadmin）->数据库管理插件
有些数据库不支持外连接，所以方便了管理员管理数据库，也方便了攻击者攻击数据库的可能
```

![img](https://cdn.nlark.com/yuque/0/2024/png/1591503/1720345432986-97c9363f-a607-45cb-8dab-2f1e446fd332.png)

### 6、服务器架设多个应用安全

```plain
服务器应用（filezila-server）ftp服务器
方便管理员进行文件操作，也方便攻击者进行攻击ftp协议服务
```

## 二、番外安全-Aliyun&域名解析&云服务器&个人等

### 1.基于域名解析安全

域名购买地址后台

![img](https://cdn.nlark.com/yuque/0/2024/png/1591503/1720345433334-9a821cf5-985d-4dc2-92e8-e21cb9421a17.png)

可以社工猜测得到厂商的账户密码。（阿里云平台等）

例如网上之前泄露的密码等。

### 2.基于服务器本身安全

例如：

远程端口连接到平台，猜测账号密码。

![img](https://cdn.nlark.com/yuque/0/2024/png/1591503/1720345433198-e2222af6-c2ea-4670-999b-471d43c2ed54.png)

### 3.基于服务商信息安全

猜测云平台账号密码

![img](https://cdn.nlark.com/yuque/0/2024/png/1591503/1720345434130-41f1af8a-0f50-48d7-92aa-ac6a8c3f1db4.png)

### 4.基于管理个人的安全

例如：钓鱼之后个人电脑被上线获取个人电脑的历史密码等。

## 三、攻击考虑阻碍-站库分离&部署防护&负载均衡&CDN等

### 1.阻碍-站库分离

站点和数据库存放的地址不同，需要进行远程。

```plain
安装程序时候，会设置数据库名和数据库主机（一般来说是本地）如果是远程的数据，比如202.1.31.145，数据库跟源码不在同一个地方
```

![img](https://cdn.nlark.com/yuque/0/2024/png/1591503/1720345433450-704c26ce-52b9-4e17-bfd8-5704837070a2.png)

### 2.阻碍-CDN加速服务

你访问的不一定是真实ip

```plain
CDN节点：相当于结点，解决访问速度。购买之后，访问结点相当于访问缓存。如果攻击下CDN的权限，也只是拿下缓存的权限
www.baidu.com www.a.shifen.com [14.215.177.39]
```

多地ping，判断。

### 3.阻碍-负载均衡服务

为了防止某台主机突然死机或者流量过大，会提供几台备用的服务器因此访问的可能是备用的服务器。

```plain
防垒机情况 相当于拿下服务器权限，可能也只是拿下了备用机的权限
```

### 4.阻碍-WAF应用防火墙

针对于网站的防护，应用层防火墙

### 5.阻碍-主机防护防火墙

```plain
360，火绒，安全狗 防木马，病毒，行为等
反向代理：
内网 web服务器
192.168.0.100内网多个主机
202.103.25.102出口

外网主机
101.3.13.45
192.168.1.100将web请求解析到101.3.13.45
NDS：域名 101.3.13.45
```





来自: [第5天：基础入门-资产架构&；端口&；应用&；CDN&；WAF&；站库分离&；负载均衡-CSDN博客](https://blog.csdn.net/qq_56414082/article/details/134181844?spm=1001.2014.3001.5502)





![img](https://cdn.nlark.com/yuque/0/2024/png/1591503/1721113226483-e74b0450-f2d5-4bc5-a9c2-875bb0a1cef0.png)

```plain
#知识点：
1. 资产架构-端口&目录&插件接口&多站点&多应用
2. 番外安全-域名&服务器本身&服务厂商&管理人员
3. 考虑阻碍-站库分离&CDN&WAF&负载均衡&主机防护

#详细点：
1、前置条件-购买使用-云服务器&域名等
2、架构搭建-目录&端口&子域&插件&应用等
3、安全部署-WAF防火墙&主机防护&HIDS等
4、性能优化-负载均衡&CDN加速&OSS云存储等
```

- 资产架构-BT搭建&多站点&多插件&多应用等

```plain
1.WEB单个源码指向安全
单个源码只需要绑定相对应的网站域名
2.WEB多个目录源码安全
bbs.xiaodi8.com         dz论坛
bbs.xiaodi8.com/blog    wp程序
一个网站，两个程序，任何一个程序出现问题都可以进行测试，选择不同目录。
3.WEB多个端口源码安全
bbs.xiaodi8.com          dz论坛
bbs.xioadi8.com:8081     wp程序
一个网站，两个程序，任何一个程序出现问题都可以进行测试
4.服务器架设多个站点安全
bbs.xiaodi8.com 47.242.117.23 dz论坛
edu.xiaodi8.com 47.242.117.23 edu程序
给到你目标bbs.xiaodi8.com，可以尝试对edu.xiaodi8.com进行测试
5.架设第三方插件接口安全
wordpress插件wp-file-manage也是有对网站造成危害
插件：web源码插件(wp-file-manage)、web应用插件（phpmyadmin）
方便了管理员管理数据库，也方便了攻击者攻击数据库的可能
6.服务器架设多个应用安全
服务器应用（filezila-server）ftp服务器
方便管理员进行文件操作，也方便攻击者进行攻击ftp协议服务
```

- 番外安全-Aliyun&域名解析&云服务器&个人等

```plain
1.基于域名解析安全
需要社工，进行猜测账号密码（阿里云）
2.基于服务器本身安全
服务器的账号密码等
3.基于服务商信息安全
阿里云账号密码
4.基于管理个人的安全
针对个人电脑等


端口类：两种不一样的程序
imap.dmu.edu.cn
imap.dmu.edu.cn:8080/gw/user/

第三方类：phpmyadmin第三方程序
139.129.92.146
139.129.92.146:8081

服务类：ftp第三方程序
139.49.9.234
ftp 139.49.9.234
```

- 考虑阻碍-站库分离&部署防护&负载均衡&CDN等

```plain
1.阻碍-站库分离
安装程序时候，会设置数据库名和数据库主机（一般来说是本地）如果是远程的数据，比如202.1.31.145，数据库跟源码不在同一个地方
2.阻碍-CDN加速服务
CDN节点：相当于结点，解决访问速度。购买之后，访问结点相当于访问缓存。如果攻击下CDN的权限，也只是拿下缓存的权限
www.baidu.com www.a.shifen.com [14.215.177.39]
3.阻碍-负载均衡服务
防垒机情况 相当于拿下服务器权限，可能也只是拿下了备用机的权限
4.阻碍-WAF应用防火墙
针对于网站的防护
5.阻碍-主机防护防火墙
360，火绒，安全狗 防木马，病毒，行为等


反向代理：
内网 web服务器
192.168.0.100内网多个主机
202.103.25.102出口

外网主机
101.3.13.45
192.168.1.100将web请求解析到101.3.13.45
NDS：域名 101.3.13.45
```





来自: [安全的小菜鸡 - 第5天：基础入门-资产架构&端口&应用&CDN&WAF&站库分离&负载均衡](http://www.mumuxi8.com/?id=8)